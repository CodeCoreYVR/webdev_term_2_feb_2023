<div class="container mt-5">
  <h1 class="text-center">Product Show</h1>
  <div class="card border-light mx-auto">
    <div class="card-header bg-secondary text-white">
      <h3 class="card-title"><%= @product.title %></h3>
    </div>
    <div class="card-body">
      <h3>Description:</h3>
      <p class="card-text"><%= @product.description %></p>
      <hr>
      <h3>Price:</h3>
      <p class="card-text"><%= number_to_currency(@product.price) %></p>
    </div>
    <div class="card-footer d-flex justify-content-around">
      <div>
        <%= link_to 'Edit', edit_product_path(@product), class: 'btn btn-secondary' %>
      </div>
      <div>
        <%= button_to 'Delete', product_path(@product), method: :delete, class: 'btn btn-secondary', onclick: "return confirm('Are you sure you want to delete this product?');" %>
      </div>
    </div>
    
    <div class="card-header bg-secondary text-white">
      <h3 class="card-title">Create Review</h3>
    </div>
    <div class="card-body">
      <% if flash[:alert] %>
        <div class="alert alert-danger">
          <%= flash[:alert] %>
        </div>
      <% end %>
      <%= form_for [@product, @review], url: product_reviews_path(@product), method: :post do |f| %>
        <div class="form-group">
          <strong><%= f.label "rating:" %></strong>
          <%= f.number_field :rating, class: 'form-control' %>
        </div>
        <hr>
        <div class="form-group">
          <strong><%= f.label :body %></strong>
          <%= f.text_area :body, class: 'form-control' %>
        </div>
        <div class="card-footer text-center">
          <%= f.submit 'Submit', class: 'btn btn-secondary' %>
        </div>
      <% end %>
    </div>

    <div class="card-header bg-secondary text-white">
      <h3 class="card-title">Reviews:</h3>
    </div>
    <ul class="list-group">
      <% if @reviews && @reviews != [] %>
        <% @reviews.each do |review| %>
          <li class="list-group-item">
            <%= review.rating %> - <%= review.body %>
            ~ <%= link_to "Delete", product_review_path(@product, review), method: :delete, data: { confirm: "Are you sure?" } %> ~
          </li>
        <% end %>
      <% else %>
        <li class="list-group-item">No reviews ...yet</li>
      <% end %>
    </ul>
  </div>
</div>